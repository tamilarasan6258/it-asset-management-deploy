<app-header role="guest"></app-header>

<main class="reset-password-page">
  <div class="reset-password-wrapper">
    <div class="reset-password-container fade-in">
      <!-- Header Section -->
      <div class="reset-password-header">
        <div class="reset-password-icon">
          <span class="icon-emoji">🔒</span>
        </div>
        <h2>Reset Password</h2>
        <p class="reset-password-subtitle">Enter your new password below</p>
      </div>

      <!-- Reset Password Form -->
      <form [formGroup]="form" (ngSubmit)="submit()" class="reset-password-form">
        <div class="form-group">
          <div class="input-wrapper">
            <span class="input-icon">🔑</span>
            <input type="password" formControlName="password" placeholder="New password" class="form-input"
              [class.error]="form.get('password')?.invalid && form.get('password')?.touched" />
          </div>
          <div class="field-error" *ngIf="form.get('password')?.invalid && form.get('password')?.touched">
            <span *ngIf="form.get('password')?.errors?.['required']">Password is required</span>
          </div>
        </div>

        <div class="form-group">
          <div class="input-wrapper">
            <span class="input-icon">🔑</span>
            <input type="password" formControlName="confirmPassword" placeholder="Confirm password" class="form-input"
              [class.error]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched" />
          </div>
          <div class="field-error" *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched">
            <span *ngIf="form.get('confirmPassword')?.errors?.['required']">Confirmation is required</span>
            <span *ngIf="form.get('confirmPassword')?.errors?.['mismatch']">Passwords must match</span>
          </div>
        </div>

        <div class="form-group">
          <button type="submit" class="reset-password-btn" [disabled]="loading || form.invalid"
            [class.loading]="loading">
            <span class="btn-content" *ngIf="!loading">
              <span class="btn-icon">🔄</span>
              Reset Password
            </span>
            <span class="btn-loading" *ngIf="loading">
              <span class="spinner"></span>
              Processing...
            </span>
          </button>
        </div>

        <!-- Success Message -->
        <div class="success-message" *ngIf="success">
          <span class="success-icon">✅</span>
          {{ success }}
        </div>

        <!-- Error Message -->
        <div class="error-message" *ngIf="error">
          <span class="error-icon">⚠️</span>
          {{ error }}
        </div>
      </form>

      <!-- Footer -->
      <div class="reset-password-footer">
        <p class="back-to-login">
          <a routerLink="/login" class="back-link">Back to Sign In</a>
        </p>
        <p class="help-text">
          Need help? Contact your system administrator
        </p>
      </div>
    </div>
  </div>
</main>